# Archived | 为云计算开发 SLA 的最佳实践

> 原文：[`developer.ibm.com/zh/tutorials/cl-slastandards/`](https://developer.ibm.com/zh/tutorials/cl-slastandards/)

**本文已归档**

**归档日期：:** 2019-05-01

此内容不再被更新或维护。 内容是按“原样”提供。鉴于技术的快速发展，某些内容，步骤或插图可能已经改变。

TM Forum 将 SLA 定义为双方或多方之间有关服务质量、优先级和责任的预期。Cloud Standards Customer Council 则将云 SLA 视为云计算用户和提供商之间对服务的书面预期。在评估云计算机提供商方面，以及在对比最终用户 SLA 时有何预期和需要注意哪些内容方面，它为决策者提供了指导。决策者还应评估云计算提供商与供货商、企业数据中心、网络提供商和内容提供商之间具有的 SLA。

当 SLA 是由重大的重组、裁员、服务整合或是向某个云服务环境的过渡驱动时，SLA 并不是强制的。它并未拥有来自所涉及的所有相关方的输入。

SLA 不是一个单方向的解决方案。一方（比如，云服务提供商）不应自行决定事情如何完成，在另一方（比如，云服务用户）对 SLA 如何制定有不同意见时尤为如此。

SLA 不是一个快速的解决方案。如果急于推进 SLA 内的条件和条款的谈判过程，就无法为各方留下足够多的时间来理解其他方的预期，尤其在各方对某个术语的意思存不同的理解时。

## 作者在 SLA 方面的亲身体验

几年前，IBM Developer 发表了我的一个有关 SLA 的文章系列，该系列共有 7 个部分（参见参考资料）。后来，美国一个主要的联邦机构的 Web 服务和面向服务架构的主管联系到我。他喜欢我的这篇文章[在 Web 服务上下文中使用 SLA，第 7 部分: 用 SLA 保证来降低漏洞的风险](http://www.ibm.com/developerworks/cn/webservices/ws-sla7/)。这篇文章谈到了中断阈值决定了能否将企业从彻底的服务拒绝（DoS）和关键系统资产的破坏中拯救出来，以及中断阈值对 SLA 保证的影响有多大。

在与这位机构主管取得联系时，我提到了该系列中的另一篇文章[用 SLA 保证 Web 服务](http://www.ibm.com/developerworks/cn/webservices/ws-sla/)。在这篇文章中，我谈到了在公开服务之前可用来测试 Web 服务特性的 6 种测试类型：

*   Statefulness：服务器有没有在正确步骤内响应？
*   Access：一个未经授权的用户能否成功访问只有管理员才有权使用的控制？
*   Response time：应用程序是否花了太多时间才响应？
*   Time-out：应用程序超时的时候会发生什么？
*   Versioning：新的构建能否打破现有应用程序的功能？

我还提及了 SLA 内可能包含的一些例外：

*   故障：硬件、通信、软件和性能监视器。
*   处于服务提供商直接控制之外的网络问题。
*   服务拒绝：客户疏忽或有意的行为；不可抗力；战争，罢工，通信不可用；无法获得 SLA 的规定所需的物资和设备。
*   定期维护：软硬件升级和备份。

这位机构主管邀请我去做一次演讲，并与他的团队做一次系统工程方面的讨论。在我的演讲中，我阐述了上述所有的要点，还介绍了 SLA 内的退出条款的重要性。这一条款能够让用户在所承诺的保证多次无法满足时从该 SLA 退出。

在评论了我的陈述的观点之后，这位主管发给我一份其机构的 SLA 模板让我评阅，并请我帮忙制定此模板的第一版以及后续版本。（出于保密的原因，我不能在此讨论其中的细节。）它最终成为了联邦系统的一部分。

这一 SLA 模板可以扩展到所有基于云的服务。不管提供的是哪种类型的服务：Web 服务、云服务和网络接入服务，所有的 SLA 关乎的都是服务保证。如果服务保证无法满足就要施以罚责。所保证的服务的水平在各合作伙伴间是不同的。

并不是所有的 Web 服务（比如一个基于云的 SOA 应用程序）都是基于云的。SOA 是一个设计模式，通过 Web 服务标准由松散耦合的、可发现的、可重用的、可互操作的平台无关的服务组成。SaaS 是一个使用模型；它使用由云服务提供商托管的资源。SOA 是一个设计模型，在该模型中，对用户是谁没有任何限制。

## 标准化多云环境内的 SLA 的重要性

虽然传统上 SLA 是云服务提供商和云服务用户（一个企业、商家或政府机构）之间的一个协议，但是正在扩展的面向其他服务的价值链已经让 SLA 对于通常十分复杂的合作伙伴间的关系愈发重要了。

比如，同一个服务提供商可以将服务提供给：

*   云服务用户（SaaS 最终用户、PaaS 开发人员和 IaaS 基础架构专家）
*   供应商
*   大型企业
*   商家
*   政府机构

同一个供应商则可以将服务提供给：

*   网络提供商
*   云服务提供商
*   Web 服务提供商
*   企业
*   商家
*   政府机构

同一个网络提供商向云服务提供商提供网络接入服务。

同一个企业向 SaaS 最终用户、PaaS 开发人员和 IaaS 基础架构专家提供私有云服务。

作为灾难前计划的一个部分，发出请求的提供商需要发现所保留的资源是否将可以从替代提供商处获得的资源。请求和替代提供商之间可以是多对多的关系。一个请求提供商可以具有多个替代提供商。一个替代提供商也可以与一个或多个请求提供商发生联系。

替代云服务提供商如果接受了来自请求云服务提供商的有关数据传输服务的请求，使请求提供商能够修复断电或负载均衡的问题，那么请求提供商就便成了云服务提供商。这个替代提供商可以限制来自多个请求服务者的数据传输请求的数量。

为了能够成功竞争，公司必须提前管理其服务的质量。由于这些服务的配给依赖于多个合作伙伴，SLA 的管理对于成功与否非常关键。更为重要的是 SLA 内的术语在合作伙伴间的标准化。

如果术语没有标准化，那么一个合作伙伴（一个请求服务提供商）使用的术语定义就可能会不同于另一个合作伙伴（一个替代服务提供商或供应者）使用的术语定义。比方说，合作伙伴可能会以不同的方式定义 SLA 参数（比如，未能满足性能）。

如果这些差别在协商期间没有解决的话，那么它们很可能会影响 SLA 过程（比如，处罚是什么以及何时加以处罚）。如果故障时间超过一个小时，那么合作伙伴可能会扣除 10% 的服务费作为处罚，而另一个合作伙伴可能在故障时间超过半小时的时候就施以 12 % 的处罚。

## SLA 最佳实践

最佳实践可用于描述开发一种可供多个合作伙伴使用的标准做事方式的过程并遵循它。如果合作伙伴在协商 SLA 时就使用术语的标准方式达成了一致意见，那么它们会对 SLA 的标准化做了贡献。

Cloud Standards Custom Council 为云计算用户提供了七个步骤，在评估云 SLA 时，他们可以采用这七个步骤来帮助了解在对比云服务提供商或是与提供商商谈条款时应该有何预期，有关的更多细节，请参阅 Cloud Standards Customer Council 于 2012 年 4 月发表的 *Practical Guide to Cloud Service Level Agreements*（参阅参考资料）。

### 步骤 1：识别云主角

第一步是识别云主角。National Institute of Standards and Technology (NIST) Reference Architecture（参阅参考资料）确认了五种独特的云主角：

1.  云计算用户
2.  云提供商
3.  云载体
4.  云代理
5.  云审计

每个主角都具有独特的角色和责任。只有前三个角色在 SLA 内的条款和条件方面存在相互关系。需要注意的一个缺点是，NIST Reference Architecture 没有确认像云供应者和 Web 服务提供商这样的其他主角。另一个缺点是，它没有说明这些主角具有多对多的关系。

### 步骤 2：评估业务水平策略

SLA 内表述的策略应该针对业务战略和策略进行评估。在评估一个云 SLA 时，用户需要考虑的内容可包含在 SLA 内的数据策略包括：数据保存、冗余、定位、捕获和私密性。

应该考虑加入 SLA 中的业务水平策略包括保障、未涵盖的服务列表、过度使用、付款和处罚方法、转包服务、授权软件和特定行业的标准。

### 步骤 3：了解 SaaS、PaaS 和 IaaS

第三步是理解 SaaS、PaaS　和 IaaS 是关于什么的，以及正在运行的是哪种云（私有云、公共云还是混合云）。SLA 内的条款和条件取决于提供商为用户提供的控制变量的复杂性。

面向 SaaS 的 SLA 没有面向 PaaS 的 SLA 那么复杂。SaaS 用户（最终用户）惟一能控制是对 SaaS 应用程序的访问，而对于 PaaS 用户（开发人员），除了不能控制虚拟机之外，他们可以控制应用程序开发生命周期。面向 IaaS 的 SLA 是最复杂的，因为除了不能控制实际的基础架构之外， IaaS 用户（基础架构专家）能够控制虚拟机。

### 步骤 4：指标

第四步是确认应该使用哪些指标来实现性能目标。可用性以及反应时间指标的示例如下：

*   SLA 内的指标名称
*   约束条件
*   收集的方法和频率

### 步骤 5：安全性

考虑云 SLA 的一些关键安全要求，其中包括：

*   资产敏感性
*   法律/法规要求
*   云提供商的安全功能

每个国家都具有不同于其他国家的隐私法规。出于这个原因，用户应该知道存储在云内的数据所在的国家。一个国家可能会禁止来自国外的某些隐私数据，而另一个国家则可能会允许使用外部的隐私数据。

### 步骤 6：确定服务管理要求

确定服务管理要求。这包括确定哪些应该进行监视和报告（例如，负载性能和应用程序性能），哪些应该进行计量。此外，还包括配给的速度应该多快（速度、测试和需求灵活性）以及应该如何管理资源更改。

### 步骤 7：为服务故障做准备并管理服务故障

最后一步是为服务故障做准备并管理服务故障，决定应该提供哪些补救措施（比如，服务补偿）以及责任限制是什么。

之后，您还需要理解故障恢复计划如何在需要时工作。此计划应该定义服务中断是什么，如何处理意外故障，以及服务中断如果延长应采取哪些措施。

退出条款应该成为每个云 SLA 的一部分，以防用户或提供商想要中断此关系。

## 云指标

在 SPEC Open Systems Group 中，Cloud Computing Working Group 曾写过一篇 “Report on Cloud Computing to the OSG Steering Committee”。此报告提供了用来测量这些测试的性能如何的一个云指标列表。

此列表包括：

*   弹性（配给内部、敏捷性，以及扩展和收缩）
*   吞吐量
*   响应时间

弹性指标包括配给内部 (Provisioning internal)、敏捷性以及扩展和收缩。供应内部量度的是获取以及丢弃一个资源所需的时间。供应内部测量了获取以下资源的时间：

*   IaaS 上的一个新实例（资源）
*   PaaS 上的一个应用服务器的新实例
*   用于满足日益提高的需求的一个新应用程序实例

敏捷性测量的是工作负载能被缩放的程度和系统的配给情况，以便尽量满足工作负载的需求。

吞吐量是指云在每单元时间内能够完成的工作量。响应时间是指用户发出请求的时间与用户接收到响应的时间之间的时间。更具体地说，就是应用程序响应用户请求所需要的时间。

## 云指标所欠缺的内容

云指标列表所欠缺的内容包括用来确定 SLA 内服务保证水平的用户、数据请求和资源阈值等级。

*   **用户阈值等级**:设置能同时访问由遗留系统分离出来的被接受或重组的服务组件组成的应用程序的最大用户数。
*   **数据请求阈值等级**:设置能同时发送给 SaaS 应用程序的数据请求的最大数量。
*   **资源阈值等级**:设置可分配给每个 SaaS 用户、PaaS 开发人员以及 IaaS 网络专家的资源（例如 CPU、存储设备和磁盘空间）的最大数量。

当用户评估 SLA 时，了解是谁设置了这些阈值等级非常重要。这些阈值等级的设置取决于分配给 SaaS、PaaS 和 IaaS 用户和提供商的控制变量：

*   **SaaS 用户**。最终用户并没有设置任何阈值等级。用户具有的惟一控制权是从桌面、笔记本电脑还是从移动设备访问来自提供商或 PaaS 开发人员的应用程序。
*   **SaaS 提供商**。提供商可设置用户阈值等级。最低限度，提供商可控制操作系统、硬件、网络基础架构、SaaS 应用程序升级和补丁。
*   **PaaS 应用程序开发人员**。开发人员可以为共驻于 PaaS 之上的 SaaS 用户设置 SaaS 用户等级的数据请求阈值。在完整的业务生命周期内，开发人员可以控制具有可接受的依赖关系的、松散耦合的服务组件的所有 SaaS 应用程序的开发，并在 PaaS 上运行它们。
*   **PaaS 提供商**。提供商可设置开发人员水平的数据请求和资源阈值。最低限度，提供商可控制操作系统、硬件、网络基础架构以及资源管理。
*   **IaaS 基础架构和网络专家**。如果专家主管此 PaaS，那么他可以为 PaaS 开发人员设置用户和数据请求。专家可以控制虚拟机级别的操作系统、网络设备以及所部属的应用程序。
*   **IaaS 提供商**。提供商可设置用户、数据请求和资源阈值水平。最低限度，提供商可控制云环境内传统计算资源的基础架构。

## 结束语

在规划 SLA 标准化时，需要考虑开发可供多个合作伙伴使用的标准做事方式的最佳实践并遵循它们。新的术语（比如用户、数据请求和资源阈值）也应在确定服务保证水平时加以考虑。如果合作伙伴在商谈 SLA 时就使用术语的标准方式达成了一致意见，那么他们对 SLA 标准化进程就会有所贡献。我们应该建立一个由开发人员、经理、业务分析师和系统工程师组成的团队，简化标准化各种部属类型（SaaS、PaaS 和 IaaS）的 SLA 内的条款和条件的工作 。

本文翻译自：[Best practices to develop SLAs for cloud computing](https://developer.ibm.com/tutorials/cl-slastandards/)（2013-01-08）